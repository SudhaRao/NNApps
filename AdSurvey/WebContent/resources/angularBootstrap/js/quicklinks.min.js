insite.quicklinks=function(){return{init:function(){jQuery(document).on("click",".dropdown-menu.quicklinks",function(i){i.stopPropagation()}),jQuery(document).on("click",".dropdown-menu.quicklinks .edit",function(){insite.quicklinks.edit()}),jQuery(document).on("click",".dropdown-menu.quicklinks .add button",function(i){i.preventDefault(),insite.quicklinks.create()}),jQuery(document).on("click",".dropdown-menu.quicklinks i.delete",function(){insite.quicklinks.destroy(jQuery(this).attr("data-index"))})},indices:function(){jQuery(".dropdown-menu.quicklinks i.delete").each(function(i){jQuery(this).attr("data-index",i)})},fill:function(){jQuery("img#quickLink-add").length&&(jQuery("#quicklink-add-title").val(jQuery("img#quickLink-add").attr("linktitle")),jQuery("#quicklink-add-url").val(jQuery("img#quickLink-add").attr("linkurl")))},shuffle:function(i){var n=jQuery(".dropdown-menu.quicklinks ul.column1 li.quicklink").length,u=jQuery(".dropdown-menu.quicklinks ul.column2 li.quicklink").length;"create"==i?u>=n&&jQuery(".dropdown-menu.quicklinks ul.column1").append(jQuery(".dropdown-menu.quicklinks ul.column2 li:nth-child(2)")):"destroy"==i&&(u>n&&jQuery(".dropdown-menu.quicklinks ul.column1").append(jQuery(".dropdown-menu.quicklinks ul.column2 li:nth-child(2)")),n==u+2&&jQuery(".dropdown-menu.quicklinks ul.column2 li:first-child").after(jQuery(".dropdown-menu.quicklinks ul.column1 li:last-child")))},edit:function(){"Edit"==jQuery(".dropdown-menu.quicklinks .edit").html()?(jQuery(".dropdown-menu.quicklinks .edit").html("Done"),jQuery(".dropdown-menu.quicklinks i.delete").css("visibility","visible"),jQuery(".dropdown-menu.quicklinks div.row.add").css("display","block"),insite.quicklinks.indices(),insite.quicklinks.fill()):(jQuery(".dropdown-menu.quicklinks .edit").html("Edit"),jQuery(".dropdown-menu.quicklinks i.delete").css("visibility","hidden"),jQuery(".dropdown-menu.quicklinks div.row.add").css("display","none"))},create:function(){var i=jQuery("#quicklink-add-title").val(),n=jQuery("#quicklink-add-url").val();return jQuery(".dropdown-menu.quicklinks .add .form-group").removeClass("has-error"),""==i?void jQuery("#quicklink-add-title").parent(".form-group").addClass("has-error"):""==n?void jQuery("#quicklink-add-url").parent(".form-group").addClass("has-error"):("http"!=n.substr(0,4)&&"ftp"!=n.substr(0,3)&&"mailto"!=n.substr(0,6)&&(n="http://"+n),jQuery(".dropdown-menu.quicklinks .add button i").show(),void jQuery.ajax({url:"https://"+insite.hostname+"/extras/menus/quicklink",data:{username:jQuery("#up_doc_unid").attr("data-value"),qltitle:i,qlurl:n},type:"POST",dataType:"json"}).fail(function(){}).done(function(){jQuery(".dropdown-menu.quicklinks .add button i").removeClass("fa-spinner fa-spin").addClass("fa-check").delay(1500).fadeOut("slow",function(){jQuery(".dropdown-menu.quicklinks .add button i").removeClass("fa-check").addClass("fa-spinner fa-spin")}),jQuery('.dropdown-menu.quicklinks .add input[type="text"]').val(""),insite.quicklinks.shuffle("create"),jQuery(".dropdown-menu.quicklinks ul.column2").append(function(){var u='<li class="quicklink">';return u+='<i class="fa fa-fw fa-trash-o delete" style="visibility: visible;"></i>',u+='<a href="'+n+'">'+i+"</a>",u+="</li>"}),insite.quicklinks.indices()}))},destroy:function(i){jQuery.ajax({url:"https://"+insite.hostname+"/extras/menus/quicklink/"+i,data:{username:jQuery("#up_doc_unid").attr("data-value")},type:"DELETE",dataType:"json"}).fail(function(){}).done(function(){jQuery('.dropdown-menu.quicklinks i.delete[data-index="'+i+'"]').parent("li").fadeOut(500,function(){jQuery(this).remove().queue(function(){insite.quicklinks.shuffle("destroy"),insite.quicklinks.indices(),jQuery(this).dequeue()})})})}}}();